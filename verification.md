# 验证结果

- 日期: 2026-01-23
- 执行者: Codex

## 结论

- 已在流式TTS阶段遇到控制标记后终止后续播报，避免额外歌名输出。
- 播放指令触发时改为仅播报一次“好的，正在为您播放《歌名》”，不再输出 LLM 其它文本。
- 已实现随机切歌排除当前曲目（曲库多于1首时生效）。
- 已增加曲名提取逻辑，优先从文件名中的《...》提取标题并用于播报。
- 播报确认改为等待 TTS 完成后再开始播放，避免“先播歌名再播放”被音乐内容重复。
- 音乐意图识别扩展覆盖“放音乐/听音乐/唱首歌”等表达。
- 音乐意图识别改为去除空格/标点后判断，避免 ASR 分词导致误拦截。
- TTS 发送前兜底过滤控制标记，确保不会读出 [PLAY: ...]。
- 已新增单元测试覆盖控制标记与随机选择逻辑。
- 随机播放意图单独识别（如“唱首歌/放音乐”），播放中不再进入闲聊。
- 快速切歌词从打断词移除，优先执行换歌逻辑。
- 打断词命中后立即丢弃后续 TTS 文本，避免继续播报。
- 测试在授予构建缓存权限后通过（详见 `.codex/testing.md`）。
